

node('master') {
    def addg = 'marx1000@poczta.fm'
    
try {



    currentBuild.result = 'SUCCESS'
  }
  catch (err) {
    currentBuild.result = 'FAILURE'
  }
  finally {
   if(currentBuild.getPreviousBuild() != null && currentBuild.result == currentBuild.getPreviousBuild().result) {
 print(currentBuild?.getPreviousBuild().result)
} else {
	print("null")
}

 mail to: "${params.EmailList.toString()}",
     subject: "Status of pipeline: ${currentBuild.fullDisplayName}",
      body: "${env.BUILD_URL} has result ${currentBuild.result}"
    
  }
}